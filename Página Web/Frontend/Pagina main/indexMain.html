<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mediaquery.css">
    <link href="https://fonts.cdnfonts.com/css/deftone-stylus" rel="stylesheet">
    <!--Todo el equipo-->
</head>
<body>
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="../Pagina main/indexMain.html">Twicla</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#">FAQ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Términos de uso</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../Amigos/index2.html">Amigos</a>
          </li>
          <li class="nav-item">
            <button type="button" class="trs" data-bs-toggle="modal" data-bs-target="#exampleModal" >Cerrar Sesión</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title titulos" id="exampleModalLabel"><b>Cerrar Sesión:</b></h5>
              <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Seguro que quieres cerrar sesión?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <a href="../Login/index.html"><button type="button" class="btn btn-primary">Cerrar Sesión</button></a>
            </div>
          </div>
        </div>
      </div>
      
    <div class="container-fluid">
        <div class="row justify-content-between">
            <div class="col-lg-3 col-md-12 izquierda">
                <div class="d-grid gap-2 col-6 mx-auto">
                  <label class="switch">
                    <input type="checkbox" id="toggle-dark-mode">
                    <span class="slider round"></span>
                  </label>
                    <button class="btn a col-12 btn-lg btn-primary" type="button">Opciones</button>
                    <button class="btn a col-12 btn-lg btn-primary" type="button">Explorar</button>
                    <button class="btn a col-12  btn-lg btn-primary" type="button">Noticias</button>
                    <button type="button" class="btn a col-12 btn-lg btn-primary position-relative feed">
                        Mensajes
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                          5+
                          <span class="visually-hidden">unread messages</span>
                        </span>
                      </button>
                      <a href="../perfil/perfil.html"><button class="btn a col-12 btn-lg btn-primary"type="button">Profile</button></a>
                  </div>
            </div>
            <div class="col-lg-4 col-md-12 central">
              <div class="botones" > <button class="btn de btn-primary" type="button">Para ti</button>
                <button class="btn iz btn-primary disabled" type="button">Siguiendo</button></div>
                    <div class="caja mensaje"> <!-- Publicación -->
                        <img  class ="foto" id="1" src="..">
                          <form id="publicacion-form">
                            <div class="form-floating">
                              <textarea id="publicacion" class="form-control" placeholder="Leave a comment here" id="floatingTextarea" style="height: 100px"></textarea>
                              <label for="floatingTextarea">Whats in your mind</label>
                            </div>
                            <div>
                              <button class="btn enviar btn-primary" type="submit">Enviar</button>
                            </div>
                          </form>
                    </div> 
                    <div class="publicaciones">
                      
                  </div>
                    <div class=" caja amigo1">
                      <svg class="perfil" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <circle cx="12" cy="7" r="4" />
                          <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                        </svg>
                          <p class="titulos">
                            <b>Gloria Fernandez</b>
                          </p>
                              <div> Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe nemo suscipit harum fugiat inventore? Corporis qui perferendis quam cum cupiditate eum! Maxime ad nisi libero praesentium mollitia! Eius, blanditiis doloribus.</div>
                  </div>
                  <div class="caja amigo1">
                      <svg class="perfil" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <circle cx="12" cy="7" r="4" />
                          <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                        </svg>
                      <p class="titulos">
                        <b>Pedro Suarez</b>
                      </p>
                      <div> Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe nemo suscipit harum fugiat inventore? Corporis qui perferendis quam cum cupiditate eum! Maxime ad nisi libero praesentium mollitia! Eius, blanditiis doloribus.</div>
                      
                  </div>
                </div>
            <div class="col-lg-3 caja derecha">
                    <div class="d-grid a gap-2 d-md-block p-4">
                        <p class="nombre titulos"><b>Ramiro Hernandez</b></p>
                        <button class="btn btn-success aceptar" type="button">Aceptar</button>
                        <button class="btn btn-danger rechazar" type="button">Rechazar</button>
                      </div>
                      <div class="d-grid a gap-2 d-md-block p-4">
                        <p class="nombre titulos"><b>Pedro Perez</b></p>
                        <button class="btn btn-success aceptar" type="button">Aceptar</button>
                        <button class="btn btn-danger rechazar" type="button">Rechazar</button>
                      </div>
                      <div class="d-grid a gap-2 d-md-block p-4">
                        <p class="nombre titulos"><b>Rocio Flores</b></p>
                        <button class="btn a1 btn-success aceptar" type="button">Aceptar</button>
                        <button class="btn a1 btn-danger rechazar" type="button">Rechazar</button>
                      </div>
                      <div class="d-grid a gap-2 d-md-block p-4">
                        <p class="nombre titulos"><b>Celia Fernandez</b></p>
                        <button class="btn a1 btn-success aceptar" type="button">Aceptar</button>
                        <button class="btn a1 btn-danger rechazar" type="button">Rechazar</button>
                      </div>
                  </div>
            
        </div>
    </div>
    <div class="fixed"><div class="form-floating">
      <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea" style="height: 100px"></textarea>
      <label for="floatingTextarea">Leave a comment here</label>
    </div>
        <div><button class="btn btn-sm btn-primary boton" type="submit">Enviar</button></div>
    </div>
    <footer><b>Todos los derechos reservado</b>s</footer>
    <script src="log.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <script src="../boton.js"></script>
  <script src="./apismainrandom.js"></script>
  <script>
    const paraTi = document.querySelector('.de');
    let central = document.querySelector('.central')
    
    paraTi.addEventListener('click',()=>{
      paraTi.classList.add('disabled');
      siguiendo.classList.remove('disabled');
      const options = {
      method: 'GET',
      headers: {
      'X-RapidAPI-Key': 'ae8dc30d25msh5703b86d3a63caep1c6863jsn21ae8a0def58',
      'X-RapidAPI-Host': 'twitter154.p.rapidapi.com'
      }
    };

    const elementos = document.querySelectorAll('.amigo1');
    elementos.forEach(elemento => elemento.remove());
    fetch('https://twitter154.p.rapidapi.com/lists/tweets?list_id=1293782097723830277&limit=40', options)
  .then(response => response.json())
  .then(tweet => {
    const tweets = tweet.results;
    tweets.forEach(tweets => {
      const tweetDiv = document.createElement('div');
      tweetDiv.classList.add('caja');
      tweetDiv.classList.add('amigo1');
      //  Se crea un array con las imágenes del tweet
      const images = tweets.extended_entities ? tweets.extended_entities.media.map(media => media.media_url_https) : [];
      tweetDiv.innerHTML += `
        <div><img class="foto" src="${tweets.user.profile_pic_url}" alt="Foto de perfil"></div>
        <div class="username">${tweets.user.username}</div>
        <div class="text">${tweets.text.replace(/https?:\/\/[^\s]+/g, '')}</div>
      `;
      images.forEach(image => {
        const imageDiv = document.createElement('div');
        const link = tweets.text.match(/https?:\/\/\S+/);
        imageDiv.innerHTML = `<a href="${link}" target="_blank"><img class="prueba" src="${image}" alt="Imagen del tweet"></a>`;
        tweetDiv.appendChild(imageDiv);
      });
      // Se agrega la clase "like-container" a un div contenedor específico para el botón "like" y su contador
      tweetDiv.innerHTML += `
        <div class="like-container">
          <button class="btn btn-danger p-1 like" type="button">Like</button>
          <div class="contador">${Math.floor(Math.random() * 1000 + 1)}</div>
        </div>
        <div class="pais">${tweets.user.location}</div>
      `;
      central.appendChild(tweetDiv);
    });
    // Se actualiza el código para seleccionar los elementos correctamente
    const botonesLike = document.querySelectorAll('.like');
    botonesLike.forEach((boton, index) => {
      boton.addEventListener('click', () => {
        const contador = boton.nextElementSibling;
        if (boton.textContent == "Like") {
          
          contador.textContent = parseInt(contador.textContent) + 1;
        } else {
          contador.textContent = parseInt(contador.textContent) - 1;
        }
        boton.textContent = boton.textContent == "Like" ? "Quitar like" : "Like";
      });
    });
  }) 
  .catch(err => console.error(err));
    })

  </script>
  <script src="client.js"></script>
  </body>
</html>